---
title: Implementing the ATCP/IP Whitepaper
excerpt: >-
  Learn how to practically implement Agent to Agent transactions from the
  proposed architecture in the ATCP/IP whitepaper.
deprecated: false
hidden: false
metadata:
  robots: index
---
> üöß Still new!
>
> We are actively working on building out real examples for ATCP/IP using Story as its foundation. At it's core, ATCP/IP is a standard for agent to agent interactions, and thus is an ongoing academic proposal for builders to implement and discover best practices through trial and error.

Below are details on how to actually implement the ***2. An ATCP/IP Transaction*** section of the whitepaper below.

<Cards columns={1}>
  <Card title="Read the ATCP/IP Whitepaper" href="https://story.foundation/whitepaper.pdf" icon="fa-file" iconColor="#cfb394" target="_blank">
    Read our Agent TCP/IP whitepaper, which defines an agent-to-agent transaction system to enable a future of AGI.
  </Card>
</Cards>

## Performing Each Step

Below we will show how to implement each step of the ATCP/IP interaction flow as demonstrated by the image below.

<Image align="center" src="https://files.readme.io/70ad20105ba8b0cd50471c4dc81f49fd4d92d0b6912f868231f838f2be584acf-atcpip-diagram.jpeg" />

### Registering your Agent's Outputs

In order to register an agent's outputs (or really any IP) on Story, follow the [How to Register IP on Story](https://docs.story.foundation/docs/how-to-register-ip-on-story) tutorial. The only difference is how you structure your IP Metadata, which should always follow the [üìù IPA Metadata Standard](doc:ipa-metadata-standard).

You can also check out more specific tutorials that demonstrate how to register images generated by DALL¬∑E or Stability:

* [Protect DALL¬∑E AI-Generated Images](doc:protect-dalle-ai-generated-images)
* [Register & Monetize Stability Images](doc:register-stability-images)

Here is an example of what the IP Metadata should look like for your generated IP (using a song as an example):

```json
{
  "title": "Midnight Marriage",
  "description": "This is a house-style song generated on suno.",
  "createdAt": "1740005219",
  "creators": [
    {
      "name": "Jacob Tucker",
      "address": "0xA2f9Cf1E40D7b03aB81e34BC50f0A8c67B4e9112",
      "contributionPercent": 100
    }
  ],
  "image": "https://cdn2.suno.ai/image_large_8bcba6bc-3f60-4921-b148-f32a59086a4c.jpeg",
  "imageHash": "0xc404730cdcdf7e5e54e8f16bc6687f97c6578a296f4a21b452d8a6ecabd61bcc",
  "mediaUrl": "https://cdn1.suno.ai/dcd3076f-3aa5-400b-ba5d-87d30f27c311.mp3",
  "mediaHash": "0xb52a44f53b2485ba772bd4857a443e1fb942cf5dda73c870e2d2238ecd607aee",
  "mediaType": "audio/mpeg"
}
```

### Creating Agreement Terms

As described in the <a href="https://story.foundation/whitepaper.pdf" target="_blank">:page_with_curl: Whitepaper</a>, agents will negotiate on what agreement terms are appropriate for the requested task:

<Accordion title="Whitepaper Section" icon="fa-info-circle">
  2 **Terms formulation**: The provider agent will consider the request and choose an appropriate set of\
  license terms for the information being requested. The terms system used should be programmable in
  nature to facilitate the parsing and formulation of the terms, such as Story‚Äôs Programmable IP License
  (PIL)\[6].

  3 **Negotiation** (optional): The agents may have an optional negotiation phase where terms may be\
  altered until they are deemed appropriate for both parties.

  * **Counter terms** (optional): During this step, the requester agent who is unsatisfied with the\
    initial proposed terms can issue a counterproposal set of terms. Both agents have access to a
    standardized terms system, enabling them to reference, add, or remove specific clauses without
    ambiguity. These counter terms may include modifications to pricing, usage rights, durations,
    licensing restrictions, or any other negotiated variables. By using a consistent, machine-readable
    format for their counter terms, agents can seamlessly iterate and respond to each other‚Äôs proposals,
    ensuring that the negotiation process remains logically coherent and easy to follow.
  * **Revised terms** (optional): After receiving counter terms, the provider agent can present revised\
    terms, taking into account the requested modifications while retaining non-negotiable core principles. The agents effectively refine the licensing conditions through successive rounds of structured
    interaction, where each iteration refines points of contention into more acceptable middle grounds.
    Because both parties rely on the same underlying terms specification, these revisions maintain
    internal consistency and simplify the comparison of multiple drafts over time. This mechanism
    ensures that both agents can converge toward an agreement that accurately reflects their mutual
    understanding and commercial intentions.
  * *This process could have multiple iterations until an agreement is reached*
</Accordion>

Once agents agree on the terms, they can be created and attached to the registered asset:

<Cards columns={2}>
  <Card title="Using the SDK" href="https://docs.story.foundation/docs/attach-terms-to-an-ip-asset" icon="fa-home" target="_blank">
    Learn how to attach terms to your IP using the SDK.
  </Card>

  <Card title="Using the Smart Contracts" href="https://docs.story.foundation/docs/sc-attach-license-terms" icon="fa-home" target="_blank">
    Learn how to attach terms to your IP using the Smart Contracts.
  </Card>
</Cards>

### Mint a License

As stated in the <a href="https://story.foundation/whitepaper.pdf" target="_blank">:page_with_curl: Whitepaper</a>, after agents have negotiated on a set of terms, the requester agent can mint a license from the provider agent with specific agreement terms attached:

<Accordion title="Whitepaper Section" icon="fa-info-circle">
  4 **Acceptance**: The requester agent will formally accept the terms by minting an immutable token (the\
  agreement token) that encapsulates the terms and rules by which the information being provided is
  to be used. Once minted the agreement is binding and the agent should commit to memory all of the
  terms associated with the information.

  * **Payment** (optional): depending on the license agreement terms chosen, some agents will require\
    an upfront payment in order to mint a license. Further, terms may stipulate a recurring fee or a
    revenue share, which can be automated via Story‚Äôs royalty system for example.
</Accordion>

Once agreement terms are attached to an IP Asset, a [License Token](doc:license-token) can be minted:

<Cards columns={2}>
  <Card title="Using the SDK" href="https://docs.story.foundation/docs/mint-a-license" icon="fa-home" target="_blank">
    Learn how to mint a License Token using the SDK.
  </Card>

  <Card title="Using the Smart Contracts" href="https://docs.story.foundation/docs/sc-mint-license-token" icon="fa-home" target="_blank">
    Learn how to mint a License Token using the Smart Contracts.
  </Card>
</Cards>

Now, the requesting agent has a License Token that can be held, giving it the rights to use the provided asset based on the attached terms.

### Claim Revenue

Once the providing agent has been paid for their work (when the requesting agent minted a license that costed $), they can claim their due revenue:

<Cards columns={2}>
  <Card title="Using the SDK" href="https://docs.story.foundation/docs/claim-revenue" icon="fa-home" target="_blank">
    Learn how to claim revenue using the SDK.
  </Card>

  <Card title="Using the Smart Contracts" href="https://docs.story.foundation/docs/sc-claiming-royalty" icon="fa-home" target="_blank">
    Learn how to claim revenue using the Smart Contracts.
  </Card>
</Cards>

## Example Integration with MCP

We have implemented a server that provides tools, based on the Model Control Protocol (MCP), for interacting with Story's protocol using <a href="https://github.com/modelcontextprotocol/python-sdk" target="_blank">the MCP Python SDK</a>.

<Cards columns={1}>
  <Card title="Story MCP" href="https://github.com/piplabs/story-sdk-mcp" icon="fa-robot" target="_blank">
    Run an MCP server locally that has tools for interacting with Story's protocol to test Agent TCP/IP.
  </Card>
</Cards>

Theoretically, an agent could use these tools to seamlessly generate IP, negotiate usage terms for that IP, and register it and license it out for commercial use to users on Story. **Coming soon! (like... tomorrow!)**

### What is MCP?

> "MCP is an open protocol that standardizes how applications provide context to LLMs. Think of MCP like a USB-C port for AI applications. Just as USB-C provides a standardized way to connect your devices to various peripherals and accessories, MCP provides a standardized way to connect AI models to different data sources and tools."

Check out the <a href="https://modelcontextprotocol.io/introduction" target="_blank">Model Context Protocol (MCP) website</a> to learn more.