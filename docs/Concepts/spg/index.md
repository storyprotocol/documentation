---
title: üì¶ –ü—Ä–æ—Ç–æ–∫–æ–ª–Ω—ã–π —à–ª—é–∑ Story (SPG)
excerpt: ''
deprecated: false
hidden: false
metadata:
  title: ''
  description: ''
  robots: index
next:
  description: ''
---
SPG (Story Protocol Gateway) ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö/—É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –≤ —Ä–∞–º–∫–∞—Ö –Ω–∞—à–µ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç **–æ–±—ä–µ–¥–∏–Ω—è—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é [üß© IP-–∞–∫—Ç–∏–≤–∞](doc:ip-asset) –∏ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –∫ —ç—Ç–æ–º—É IP-–∞–∫—Ç–∏–≤—É) **–≤ –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞**.

> üóíÔ∏è –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã
>
> –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ [—Ç—É—Ç](https://github.com/storyprotocol/protocol-periphery-v1/tree/main/contracts).

–§—É–Ω–∫—Ü–∏—è `mintAndRegisterIpAndAttachPILTerms`, —è–≤–ª—è—é—â–∞—è—Å—è —á–∞—Å—Ç—å—é SPG (–≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, "Workflow –¥–ª—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è –ª–∏—Ü–µ–Ω–∑–∏–π"), –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—Ç—å NFT, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –∫–∞–∫ IP-–∞–∫—Ç–∏–≤ –∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ –Ω–µ–º—É –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã–µ —É—Å–ª–æ–≤–∏—è.

```sol LicenseAttachmentWorkflows.sol
function mintAndRegisterIpAndAttachPILTerms(
  address nftContract,
  address recipient,
  IPMetadata calldata ipMetadata,
  PILTerms calldata terms
) external onlyCallerWithMinterRole(nftContract) returns (address ipId, uint256 tokenId, uint256 licenseTermsId)
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ Workflow

–í SPG —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –æ–¥–Ω—É. –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –æ–Ω–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ "Workflow".

> üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Workflow
>
> –ü—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –Ω–∏–∂–µ —Å–ø–∏—Å–æ–∫ Workflow ‚Äî —ç—Ç–æ –∫–æ–ø–∏—è [—ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞](https://github.com/storyprotocol/protocol-periphery-v1/blob/main/docs/WORKFLOWS.md). –ú—ã –±—É–¥–µ–º —Å—Ç–∞—Ä–∞—Ç—å—Å—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ–≥–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å, –æ–¥–Ω–∞–∫–æ –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É.

### [Workflow –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏](../contracts/interfaces/workflows/IRegistrationWorkflows.sol)

* `createCollection`: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ SPGNFT.
* `registerIp`:  –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è IP-–∞–∫—Ç–∏–≤–∞.
* `mintAndRegisterIp`: –°–æ–∑–¥–∞–Ω–∏–µ NFT ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –µ–≥–æ –∫–∞–∫ IP-–∞–∫—Ç–∏–≤–∞.

### [Workflow –¥–ª—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è –ª–∏—Ü–µ–Ω–∑–∏–∏](../contracts/interfaces/workflows/ILicenseAttachmentWorkflows.sol)

* `registerPILTermsAndAttach`: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è PIL-—É—Å–ª–æ–≤–∏–π ‚Üí –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∏—Ö –∫ IP.
* `registerIpAndAttachPILTerms`:  –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è IP ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è PIL-—É—Å–ª–æ–≤–∏–π ‚Üí –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∏—Ö –∫ IP.
* `mintAndRegisterIpAndAttachPILTerms`: –°–æ–∑–¥–∞–Ω–∏–µ NFT ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –µ–≥–æ –∫–∞–∫ IP ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è PIL-—É—Å–ª–æ–≤–∏–π ‚Üí –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∏—Ö –∫ IP.

### [Workflow –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤](../contracts/interfaces/workflows/IDerivativeWorkflows.sol)

* `registerIpAndMakeDerivative`: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è IP ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –µ–≥–æ –∫–∞–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–≥–æ –æ—Ç –¥—Ä—É–≥–æ–≥–æ IP.
* `mintAndRegisterIpAndMakeDerivative`: –°–æ–∑–¥–∞–Ω–∏–µ NFT ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –µ–≥–æ –∫–∞–∫ IP ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –µ–≥–æ –∫–∞–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–≥–æ –æ—Ç –¥—Ä—É–≥–æ–≥–æ IP.
* `registerIpAndMakeDerivativeWithLicenseTokens`: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è IP ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –µ–≥–æ –∫–∞–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–≥–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤.
* `mintAndRegisterIpAndMakeDerivativeWithLicenseTokens`: –°–æ–∑–¥–∞–Ω–∏–µ NFT ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –µ–≥–æ –∫–∞–∫ IP ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –µ–≥–æ –∫–∞–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–≥–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤.

### [Workflow –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏](../contracts/interfaces/workflows/IGroupingWorkflows.sol)

* `mintAndRegisterIpAndAttachLicenseAndAddToGroup`: –°–æ–∑–¥–∞–Ω–∏–µ NFT ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –µ–≥–æ –∫–∞–∫ IP ‚Üí –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π ‚Üí –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É IP.
* `registerIpAndAttachLicenseAndAddToGroup`: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è IP ‚Üí –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π ‚Üí –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É IP.
* `registerGroupAndAttachLicense`: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø—ã IP ‚Üí –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –∫ –≥—Ä—É–ø–ø–µ.
* `registerGroupAndAttachLicenseAndAddIps`: Registers a group IP ‚Üí Attaches the given license terms to the group IP ‚Üí Adds existing IPs to the group IP

### [Workflow –¥–ª—è —Ä–æ—è–ª—Ç–∏](../contracts/interfaces/workflows/IRoyaltyWorkflows.sol)

* `transferToVaultAndSnapshotAndClaimByTokenBatch`: –ü–µ—Ä–µ–≤–æ–¥ –¥–æ—Ö–æ–¥–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ä–æ—è–ª—Ç–∏ IP ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ ‚Üí –í—ã–≤–æ–¥ –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–æ—è–ª—Ç–∏ –ø–æ—Ç–æ–º–∫–æ–≤ IP.
  * *–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ*: –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ —Ä–æ—è–ª—Ç–∏-—Ç–æ–∫–µ–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –≤—ã–≤–µ—Å—Ç–∏ –¥–æ—Ö–æ–¥—ã –∏ —Ä–æ—è–ª—Ç–∏ –æ—Ç –ø–æ—Ç–æ–º–∫–æ–≤.
* `transferToVaultAndSnapshotAndClaimBySnapshotBatch`: –ü–µ—Ä–µ–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–Ω–∏–º–∫–∞ ‚Üí –í—ã–≤–æ–¥ —Ç–µ–∫—É—â–∏—Ö –¥–æ—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–Ω–∏–º–∫–æ–≤.
  * *–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ*: –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ —Ä–æ—è–ª—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Ö–æ–¥—ã –∑–∞ —Ç–µ–∫—É—â–∏–π –∏ –ø—Ä–æ—à–ª—ã–µ –ø–µ—Ä–∏–æ–¥—ã.
* `snapshotAndClaimByTokenBatch`: –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞ (—Å–Ω–µ–ø—à–æ—Ç–∞) ‚Üí –í—ã–≤–æ–¥ —Ç–µ–∫—É—â–∏—Ö –¥–æ—Ö–æ–¥–æ–≤.
  * *–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ*: –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ —Ä–æ—è–ª—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –¥–æ—Ö–æ–¥.
* `snapshotAndClaimBySnapshotBatch`: –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞ ‚Üí –í—ã–≤–æ–¥ –¥–æ—Ö–æ–¥–æ–≤ –∑–∞ —Ç–µ–∫—É—â–∏–π –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–µ—Ä–∏–æ–¥—ã.
  * *–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ*: –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ —Ä–æ—è–ª—Ç–∏, –∂–µ–ª–∞—é—â–∏—Ö –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Ö–æ–¥—ã –∑–∞ –≤—Å–µ –ø–µ—Ä–∏–æ–¥—ã.

## –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ `mintAndRegisterIpAndAttachPILTerms`–∏ `registerIpAndAttachPILTerms`, –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã. –ß—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≥–∏–±–∫–æ—Å—Ç—å, SPG –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º "Multicall", –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤—ã –≤ –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ "Multicall" [–ü–∞–∫–µ—Ç–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π](doc:batch-spg-function-calls).
