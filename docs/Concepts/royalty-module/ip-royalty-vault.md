---
title: Хранилище Роялти IP
excerpt: ""
deprecated: false
hidden: false
metadata:
  title: ""
  description: ""
  robots: index
next:
  description: ""
---

> ⏩ Читать не обязательно - 1-минутное саммари
>
> Хранилище Роялти IP – это пул, в котором хранятся все денежные поступления, связанные с IP-активом
>
> Каждый IP-актив имеет 100,000,000 Токенов Роялти, где каждый токен представляет собой право на 0.000001% дохода этого актива («Токены Дохода»), хранящегося в пуле.
>
> Токены Дохода – это токены стандарта ERC-20, используемые для оплаты (например, USDC). Для использования токены должны быть включены в белый список протокола.

Каждый IP-актив имеет свое Хранилище Роялти IP, которое служит пулом для всех денежных поступлений, связанных с коммерческой эксплуатацией IP или выдачей лицензий. Любой владелец Токенов Роялти имеет право требовать свою долю из этого пула.

## Терминология токенов

1. Токены Роялти – контракт Хранилища Роялти IP также является контрактом ERC-20 для Токенов Роялти каждого IP-актива. Это означает, что адрес Хранилища Роялти IP для IP-актива также является адресом Токенов Роялти. Каждый IP-актив имеет 100,000,000 Токенов Роялти, и каждый токен представляет 0.000001% дохода. Владельцы этих токенов могут требовать Токены Дохода (см. ниже), находящиеся в соответствующем Хранилище Роялти IP.
2. Токены Дохода – это токены, используемые для оплаты (например, ETH, USDC и т.д.). Токены Роялти могут быть использованы для получения Токенов Дохода.
   Токен ERC-20 должен быть включен в белый список управления в контракте [RoyaltyModule.sol](https://github.com/storyprotocol/protocol-core-v1/blob/e339f0671c9172a6699537285e32aa45d4c1b57b/contracts/modules/royalty/RoyaltyModule.sol#L50), чтобы его можно было использовать как Токен Дохода.

### Токены Дохода из белого списка

ERC-20 токен должен быть включен в белый список нашего протокола в контракте [RoyaltyModule.sol](https://github.com/storyprotocol/protocol-core-v1/blob/e339f0671c9172a6699537285e32aa45d4c1b57b/contracts/modules/royalty/RoyaltyModule.sol#L50), чтобы быть использованным в качестве Токена Дохода. Вот список токенов из белого списка (вы можете сгенерировать токены по ссылке):

| Токен | Адрес Контракта                              | Создать                                                                                                                     |
| :---- | :------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------- |
| SUSD  | `0xC0F6E387aC0B324Ec18EAcf22EE7271207dCE3d5` | <a href="https://odyssey.storyscan.xyz/address/0xC0F6E387aC0B324Ec18EAcf22EE7271207dCE3d5" target="_blank">Минт SUSD ↗️</a> |
| WIP   | `0x1516000000000000000000000000000000000000` |                                                                                                                             |

## Как получить Токены Роялти

Когда IP-актив получает доход, он помещается в его Хранилище Роялти IP. Чтобы получить доход из этого хранилища, необходимо обладать соответствующими Токенами Роялти. Любой адрес, владеющий Токенами Роялти для данного IP-актива, имеет право на соответствующий процент дохода (процент от общего количества токенов роялти, находящихся в обращении).

Хранилище Роялти IP активируется, а Токены Роялти распределяются при выполнении одного из двух условий (в зависимости от того, что произойдет раньше):

- Выпуск лицензии: Если IP-актив впервые выпускает Токен Лицензии, связанный IP-аккаунт получает 100% токенов роялти.
- Регистрация производного актива: Если IP-актив регистрируется как производный, связанный IP-аккаунт получает y% токенов роялти, а (100-y)% отправляется в контракты Политики Роялти, связанные с предшествующими активами в цепочке происхождения. y% – это доля, которую IP обязан зарезервировать для своих предшественников.

Роялти Токены как токены ERC-20 могут быть отправлены кому-то или даже размещены на продажу на вторичном рынке.

## Как происходит распределение доходов


Эта секция объясняет, как доход распределяется с момента оплаты до его получения владельцем Токенов Роялти. Рассмотрим пример, связанный с [Ликвидным Абсолютным Процентом (LAP)](doc:liquid-absolute-percentage), однако процесс идентичен для других Политик Роялти:

Пример оплаты: IPA4 переводит IPA3 1 миллион USDC, вызывая функцию `payRoyaltyOnBehalf`.

1. Токены Дохода поступают в контракт Модуля Роялти, который распределяет их в соответствии со **стеком роялти** для получающего актива. Например, если стек роялти IPA3 составляет 15%, 850k USDC поступает в хранилище IPA3, а 150k – в контракт LAP.

   ![](https://files.readme.io/be5dfdf9064320904ca27bc1f12a2475456064a19049b7d8fb2500d094746e1d-image.png)

2.  Контракт LAP распределяет оплату предшественникам, вызывая `transferToVault`. Например, IPA2 получает 100k (10% дохода IPA3), а IPA1 – 50k (5% дохода IPA3).

   ![](https://files.readme.io/1ad3a4827aa302dd94bcf45ebca6749b68821fcfaadb6a85c9b70b9c8d3f4af5-image.png)

3.  Теперь Токены Дохода находятся в Хранилище Роялти IP. Владельцы соответствующих Токенов Роялти могут запросить их. Обычно они хранятся в IP-аккаунте, откуда и происходят. Для запроса необходимо вызвать `claimRevenueOnBehalfByTokenBatch` или `claimRevenueOnBehalf`

   ![](https://files.readme.io/c3523d5de4a3129f07eeceff5ff577178c3b3161b35fa2b75ed6e8ef98191872-image.png)

### Внешние Политики Роялти

Токены Дохода могут перемещаться из одного хранилища в другое с помощью функции `claimByTokenBatchAsSelf`, находящейся в контракте `IpRoyaltyVault.sol`. Однако для этого хранилище, запрашивающее токены, должно владеть Токенами Роялти хранилища, из которого оно запрашивает доход.

Это возможно только для хранилищ, принадлежащих активам в одной и той же цепочке производных. Если хранилище владеет Токенами Роялти актива, который не является его предком, получение дохода с этих токенов невозможно.