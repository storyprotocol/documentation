---
title: Внешняя Политика Роялти
excerpt: ''
deprecated: false
hidden: false
metadata:
  title: ''
  description: ''
  robots: index
next:
  description: ''
---
В реальном мире существует множество вариантов и разновидностей правил распределения роялти. То же самое можно ожидать и в блокчейне. В случаях, когда требуется уникальный и специфический набор правил роялти, они могут быть зарегистрированы как **Внешняя Политика Роялти**.

## 1. Что такое Внешняя Политика Роялти?

Это смарт-контракт, который наследует определенный интерфейс под названием `IExternalRoyaltyPolicy`, включающий следующий view-функционал:

```sol IExternalRoyaltyPolicy
  /// @notice Возвращает количество токенов роялти, необходимых для связи дочернего IP с данным IP-активом
    /// @param ipId ID IP-актива
    /// @param licensePercent Процент лицензии
    /// @return Количество токенов роялти, необходимых для связи дочернего IP с данным IP-активом
    function getPolicyRtsRequiredToLink(address ipId, uint32 licensePercent) external view returns (uint32);
```

После разработки смарт-контракта убедитесь, что он наследует указанный интерфейс. Затем вы можете зарегистрировать вашу новую Внешнюю Политику Роялти, вызвав функцию `registerExternalRoyaltyPolicy` в файле RoyaltyModule.sol.

## 2. Как это работает?

Рассмотрим пример новой внешней политики роялти под названием "Политика X".

### Пользователи выбирают Внешние Политики Роялти

Владелец IP-аккаунта выбирает политику роялти, которую он хочет разрешить для ремиксации IP. Можно выбрать различные правила роялти, такие как LAP, LRP и другие Внешние Политики Роялти. Допустим, пользователь решает выпустить лицензионный токен с "Политикой X". После этого IP2 делает ремикс IP1, а IP3 делает ремикс IP2, и мы получаем следующую ситуацию:

![](https://files.readme.io/412377155f8b31081aa77a2bf8dfe86ac40795ebc9b2f963471f8e4d6cacf559-image.png)

Каждый раз при создании ремикса связь между родительским и производным активом включает два элемента данных:

1. Адрес политики роялти
   1. В данном примере это адрес "Политики X".
2. Процент токенов роялти, который родитель требует от производных активов. Этот процент может варьироваться в зависимости от используемой политики роялти: это может быть относительный процент, абсолютный процент или процент, скорректированный по специфическим правилам.
   1. 10% между IP1 и IP2
   2. 50% между IP2 и IP3

### Внешние Политики Роялти получают токены роялти от пользователей их IP

В продолжение примера, каждый раз, когда создается ремикс, во время вызова функции `onLinkToParents` в RoyaltyModule.sol вызывается следующая функция на адресе "Политики X":

`getPolicyRtsRequiredToLink(address ipId, uint32 licensePercent) external view returns (uint32)`

Она возвращает процент токенов роялти производного актива, который требует политика роялти для осуществления связи. Эта часть токенов роялти отправляется в контракт "Политики X". В данном примере:

* "Политика X" получает 3% от токенов RT2, которые затем могут быть перераспределены ее пользователям. Владелец IP1 хотел 10%, однако — предположим для примера — что из-за специфики "Политики X" и ее логики IP2 получает особый статус на платформе, что позволяет ему снизить свою долю до 3% (70% скидка).
* "Политика X" получает 50% от токенов RT3, которые затем перераспределяются среди ее пользователей.

![](https://files.readme.io/33efb951a9be1339e849eb025d183a0f8d4f949f634ee5dfe1f13dac52c79bb0-image.png)

### Внешние Политики Роялти перераспределяют ценность среди своих пользователей по собственным правилам

Существует два способа перераспределения ценности через Внешнюю Политику Роялти:

1. Напрямую отправлять токены роялти пользователям.
2. Хранить токены роялти в контракте Внешней Политики Роялти, позволяя пользователям требовать токены дохода через этот контракт.

Рассмотрим оба случая в контексте "Политики X". Предположим, из 50% токенов RT3, полученных "Политикой X", 40% остаются в контракте, а 10% отправляются в хранилище роялти предка (IP1).

![](https://files.readme.io/4a8c08eac060fdaad89116ee26a60939938298a563d526d8835e5064e3f02e28-image.png)Теперь представим, что IP3 получает выплату в размере 1M USDC. Пример потока средств:



![](https://files.readme.io/f39ebfc34c5b276df0ac1c32f3e014969d2c152daa41f099be4a75a5dd219734-image.png)

Из 1M USDC, поступивших в хранилище роялти IP3:

* 500k USDC получают владельцы IP3, у которых было 50% от токенов RT3.
* 100k USDC получает хранилище роялти IP1 (10% от RT3) через функцию `claimByTokenBatchAsSelf`.
* 400k USDC получает "Политика X", у которой было 40% RT3. Эти средства распределяются среди пользователей "Политики X" в соответствии с ее специфическими правилами, определяющими доли y% и z%.